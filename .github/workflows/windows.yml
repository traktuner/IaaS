name: windows
on: 
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-2022
    steps:
    - uses: actions/checkout@v3
    - name: Setting the environment up.
      env:
        TAILSCALE_TOKEN: ${{ secrets.TAILSCALE_TOKEN }}
        VNC_USER_PASSWORD: ${{ secrets.VNC_USER_PASSWORD }}
        VNC_PASSWORD: ${{ secrets.VNC_PASSWORD }}
        VNC_USER: ${{ secrets.VNC_USER }}
      #working-directory: ./github-runner-windows-gui
      run: |
            choco install tailscale
            refreshenv
            tailscale.exe up --authkey=$TAILSCALE_TOKEN
    #keep session running
    - name: Setup tmate session
      uses: mxschmitt/action-tmate@v3
